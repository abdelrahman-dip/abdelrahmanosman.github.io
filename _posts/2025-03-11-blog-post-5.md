---
title: "Single Balanced Mixer Design"
date: 2025-02-08
permalink: /posts/2025/09/single-balanced-mixer/
tags:
  - RFIC
  - Microwave Engineering
  - ADS
  - Mixer
---

## Design Objective

a **single balanced mixer** using 2 diodes and microstrip lines for down-conversion, converting an RF input at 3.6 GHz to an IF output at 200 MHz using an LO at 3.8 GHz. The design focuses on optimizing conversion gain, linearity, and noise performance in a passive configuration. Key specifications include:
- LO power (PLO): 10 dBm
- RF power (PRF): -20 dBm
- Conversion gain target: Near 0 dB or positive
- Suppression of unwanted mixing products and harmonics
- Noise figure evaluation across RF frequencies

The simulation utilizes the harmonic balance (HB) analysis with a frequency sweep from 1 GHz to 6 GHz to assess performance.

---

## Single-Balanced Mixer Operation

Single-balanced mixers eliminate either the LO or RF component from the IF output **without using additional filters**. This is achieved by employing **two diodes** and a **180° hybrid coupler** acting as a balun.

Historically, wideband receivers often used a **90° hybrid combiner** to separate the RF and LO signals. However, the level of isolation strongly depended on accurate impedance matching of the diodes. The introduction of the **180° hybrid coupler** resolved this issue by providing better isolation between the RF and LO ports and reducing unwanted intermodulation products.

As illustrated in the mixer schematic (see figure below):

- The **RF** and **LO** signals are applied to the **sum** and **delta** input ports of the hybrid.
- The two hybrid outputs are connected to the diodes: one oriented toward the hybrid and the other away from it.
- The signal applied to the **180° port** (typically the LO) becomes balanced, and as a result, does **not appear at the IF output**.

In this configuration:

- The **LO signal**, applied to the 180° port, is balanced and therefore **suppressed at the IF port**, while still controlling the switching action of the **Schottky diodes** for the mixing process.
- The **RF signal** is further attenuated from the IF output by:
  - A **bypass capacitor** to ground (C1)
  - A **dedicated low-pass filter (LPF)** at the IF path.

The mixing process is governed by the diode's nonlinear I-V characteristic:

$$
I(V) = I_s \left( e^{\frac{qV}{n k T}} - 1 \right)
$$

where:
- \\( I_s \\) = saturation current
- \\( q \\) = electron charge
- \\( n \\) = ideality factor
- \\( k \\) = Boltzmann constant
- \\( T \\) = temperature

Under LO drive, the diode conductance varies periodically, leading to frequency conversion. The conversion gain for a passive DBM is:

$$
G_c = -10 \log_{10} \left( \frac{4 \pi^2 R_L R_s}{(R_L + R_s)^2} \right) + G_{\text{mixing}}
$$

where \\( R_L \\) is load resistance, \\( R_s \\) is source resistance, and \\( G_{\text{mixing}} \\) is the intrinsic mixing efficiency, typically -6 to -10 dB for diode mixers.

The LO-RF isolation is high due to balancing, modeled as:

$$
\text{Isolation} = 20 \log_{10} \left| \frac{Z_{\text{common}}}{Z_{\text{diff}}} \right|
$$

where \\( Z_{\text{common}} \\) and \\( Z_{\text{diff}} \\) are common and differential mode impedances.

Noise figure in a passive mixer is approximately the conversion loss plus diode noise:

$$
NF = -G_c + 10 \log_{10} \left( 1 + \frac{T_d}{T_0} \right)
$$

where \\( T_d \\) is diode temperature and \\( T_0 \\) = 290 K.

The IF filter section uses an LC ladder to select the IF and reject harmonics, with cutoff frequency:

$$
f_c = \frac{1}{2\pi \sqrt{L C}}
$$

Harmonic balance solves the nonlinear system:

$$
\mathbf{I}(\mathbf{V}) + j \Omega \mathbf{Q}(\mathbf{V}) + \mathbf{Y} \mathbf{V} = \mathbf{E}
$$

with MaxOrder=4 capturing up to the 4th harmonic.

---

## Schematic Design

The full schematic integrates microstrip lines (MLIN), diodes (DIODEM1), and an LC IF filter on a substrate (MSub) with H=0.5 mm, Er=4.2, Mur=1, TanD=0.003, T=0.035 mm.

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/DOUB_BAL_MIX/schem.png" alt="Full Mixer Schematic" width="700"/>

The schematic shows a balanced structure with TL1–TL5 (microstrip lines with widths 0.98–1.67 mm, lengths 2.5–10.46 mm), diodes in anti-parallel or series configuration for balancing, and capacitors C4=0.35 pF, C5=0.35 pF for coupling.

The IF filter section is an LC ladder for low-pass filtering at 200 MHz:

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/DOUB_BAL_MIX/iffilter.png" alt="IF Filter Schematic" width="700"/>

Components:

- L1 = 7.07 nH, R=1.6 Ohm
- C1 = 4.78 pF
- L2 = 3.99 nH, R=1.39 Ohm
- C2 = 6.2 pF
- C3 = 50 pF

This filter has a cutoff around 200 MHz, with impedance matching to 50 Ohm.

The setup includes HB simulation and substrate specifications definition:

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/DOUB_BAL_MIX/setup.png" alt="Full Setup and Parameters" width="700"/>

---

## Simulation Setup

The harmonic balance simulation is configured with:
- LO frequency: 3.8 GHz
- RF frequency: 3.6 GHz
- IF frequency: 200 MHz
- LO power: 10 dBm
- RF power: -20 dBm
- MaxOrder: 4
- Frequency sweep: 1 GHz to 6 GHz (start=1.0 GHz, stop=6.0 GHz, step=0.1 GHz)
- Measurement: ConvGain = dBm(mix(Vif,1,1)) - PRF
- Noise simulation: HB.NOISE, with RFfreq sweep

Noise figure simulation uses the schematic with diode models (DIODEM1, Area=1, Region=nonlinear, Temp=16.85).

---

## Simulation Results

The noise figure plot shows NF vs RF frequency (1–6 GHz):

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/DOUB_BAL_MIX/nf.png" alt="Noise Figure vs RF Frequency" width="700"/>

- NF starts high (~100 dB) at 1 GHz, drops sharply to ~40 dB at 1.5 GHz, peaks at ~50 dB around 2 GHz, then decreases to ~10 dB at 6 GHz.
- At RF=3.6 GHz, NF ≈ 20 dB, indicating moderate noise performance for the passive design.

The LO power sweep vs conversion gain and IF power spectrum:

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/DOUB_BAL_MIX/plo_vif.png" alt="LO Power Sweep vs ConvGain and IF Power Spectrum" width="700"/>

- Left plot: dBm(Vif) vs freq (GHz), showing IF at 0.2 GHz ~ -30 dBm, with harmonics at 1.8 GHz (~ -150 dBm), 3.6 GHz (~ -50 dBm), 3.8 GHz (~ -100 dBm), and others suppressed below -200 dBm.
- Right plot: ConvGain vs PLO (0 to 20 dBm), starting at -40 dB, rising to -10 dB at PLO=10 dBm, then plateauing with fluctuations.

The design achieves good harmonic suppression (>50 dB for most products), with conversion gain of ~ -10 dB at nominal PLO=10 dBm.

---

## Final Results

- RF Frequency: 3.6 GHz
- LO Frequency: 3.8 GHz
- IF Frequency: 200 MHz
- Conversion Gain: ~ -10 dB at PLO=10 dBm
- Noise Figure at RF=3.6 GHz: ~20 dB
- Harmonic Suppression: >50 dB for key products

**Comparison Table:**

| Parameter | Specification | Simulation Result |
|-----------|---------------|-------------------|
| Conversion Gain (dB) | Near 0 | -10 |
| Noise Figure (dB) | Low | 20 |
| IF Power (dBm) | N/A | -30 |
| LO Leakage Suppression (dB) | High | >70 |
| Harmonic Levels (dBm) | Low | <-100 for most |

---

## Conclusion

The single balanced mixer using 2 diodes and microstrip lines demonstrates a good down-conversion from 3.6 GHz RF to 200 MHz IF with moderate conversion loss and noise. The HB analysis reveals good linearity and harmonic suppression, suitable for microwave applications, though further optimization (e.g., diode selection or matching) could improve gain and NF.

---
