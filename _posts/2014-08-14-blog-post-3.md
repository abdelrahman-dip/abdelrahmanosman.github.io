---
title: "Parallel Coupled Line Bandpass Filter Design using ADS"
date: 2025-09-06
permalink: /posts/2025/09/bandpass-filter/
tags:
  - RFIC
  - Microwave Engineering
  - ADS
---

## Design Objective

The goal is to design a **parallel coupled-line bandpass filter** with the following specifications:

- **Passband:** 2.8 GHz – 3.2 GHz  
- **Insertion Loss (S21):** \( > -2 \, \text{dB} \)  
- **Return Loss (S11):** \( < -20 \, \text{dB} \)  
- **Out-of-Band Rejection:** \( > 40 \, \text{dB at } f < 2.3 \, \text{GHz and } f > 3.7 \, \text{GHz} \)  

The substrate used is **Taconic RF60**:
- Relative permittivity \( \varepsilon_r = 6.15 \)
- Thickness = 0.635 mm
- Copper thickness = 0.017 mm

---

## Filter Design and Theory

The filter is based on a **5-section coupled-line design**. The characteristic impedance of the microstrip line can be approximated by:

$$\[
Z_0 = \frac{60}{\sqrt{\varepsilon_{\text{eff}}}} \ln\left( \frac{8h}{W} + 0.25\frac{W}{h} \right)
\]$$

where:
- \( h \) = substrate height
- \( W \) = microstrip width
- \( \varepsilon_{\text{eff}} \) = effective dielectric constant

The guided wavelength at center frequency \( f_0 \) is:

\[
\lambda_g = \frac{c}{f_0 \sqrt{\varepsilon_{\text{eff}}}}
\]

---

## Schematic Design

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/schem.png" alt="Filter Schematic" width="700"/>

The initial dimensions:
- \( L = 11.92 \, \text{mm} \)
- \( W = 1 \, \text{mm} \)
- \( S = 1 \, \text{mm} \)

**Calculated Microstrip Dimensions:**

- Length \( L_{\text{in/out}} = 11.92 \, \text{mm} \)
- Width \( W_{\text{in/out}} = 0.91 \, \text{mm} \)

---

### Substrate Parameters

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/sub_par.png" alt="Substrate Parameters" width="500"/>

---

### LineCalc Output

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/lin_cal.png" alt="LineCalc Output" width="500"/>

---

## Initial Simulation

The initial ADS simulation results show:
- Passband around **3 GHz**
- Insertion Loss \( S_{21} \approx -2.5 \, \text{dB} \)
- Return Loss \( S_{11} \approx -15 \, \text{dB} \)

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/s_par_before_optim.png" alt="Initial S-parameters" width="700"/>

---

## Optimization in ADS

To improve performance, the **ADS Optimization Tool** is used with the following optimization variables:

- Line Lengths (\(L\)): 10 mm – 15 mm  
- Line Widths (\(W\)): 0.2 mm – 3 mm  
- Coupling Gaps (\(S\)): 0.2 mm – 3 mm  

![Optimization goal setup in ADS](https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/goal.png)

![Design goals for the parallel coupled line filter](https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/des_goals.png)

### Optimization Process

The optimization was set up in ADS to:

- Minimize insertion loss (\(S_{21} > -2\) dB)  
- Maximize return loss (\(S_{11} < -20\) dB)  
- Improve out-of-band rejection (\(> 40\) dB at unwanted frequencies)  

![Optimization goal window in ADS](https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/optim_goal_win.png)

![Optimization process window in ADS](https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/optim_wind.png)

After optimization, the final dimensions obtained are:

- Optimized \(S\) values: \(s_1 = 0.363067\), \(s_2 = 0.547091\), \(s_3 = 0.207747\)  
- Optimized \(W\) values: \(w_1 = 0.201454\), \(w_2 = 0.634206\), \(w_3 = 2.50838\)  
- Optimized \(L\) values: \(l_1 = 13.547\), \(l_2 = 10.6291\), \(l_3 = 13.9269\)  

![S-parameter results after optimization](https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/after_optim.png)

---

## Final Results

- Passband: **2.8 – 3.2 GHz**
- \( S_{21} > -2 \, \text{dB} \)
- \( S_{11} < -20 \, \text{dB} \)
- Out-of-band rejection \( > 40 \, \text{dB} \)

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/final_result.png" alt="Final S-parameters" width="700"/>

---

## Layout Simulation (Momentum)

Layout was generated and simulated in ADS Momentum:

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/layout.png" alt="Final Layout" width="600"/>

**Comparison Table:**

| Parameter | Spec | Schematic | Layout |
|-----------|------|-----------|--------|
| \( S_{21} \) @ 2.8 GHz | ≥ -2 dB | -1.126 dB | -0.263 dB |
| \( S_{11} \) | ≤ -20 dB | -20.196 dB | -23.416 dB |

---

### Data Analysis

The following observations can be made from the simulation results:

**Schematic Simulation Results:**

- At \( f = 2.800 \, \text{GHz} \), \( S_{21} = -1.495 \) dB  
- At \( f = 3.200 \, \text{GHz} \), \( S_{21} = -1.545 \) dB  
- At \( f = 2.300 \, \text{GHz} \) and \( f = 3.700 \, \text{GHz} \), \( S_{21} \) drops to \(-52.272\) dB and \(-40.316\) dB, respectively  
- \( S_{11} \) at \( f = 3.000 \, \text{GHz} \) is \(-20.196\) dB  

**Layout Simulation Results:**

- At \( f = 2.800 \, \text{GHz} \), \( S_{21} = -0.263 \) dB  
- At \( f = 3.200 \, \text{GHz} \), \( S_{21} = -1.457 \) dB  
- At \( f = 2.302 \, \text{GHz} \) and \( f = 3.708 \, \text{GHz} \), \( S_{21} \) drops to \(-45.391\) dB and \(-52.325\) dB  
- \( S_{11} \) at \( f = 2.970 \, \text{GHz} \) is \(-23.416\) dB  

**Comparison:**

- The layout simulation shows slightly higher insertion loss (\( S_{21} \)) compared to the schematic, which is expected due to parasitic effects in the layout  
- Both simulations meet the specified performance criteria, with good transmission within the desired band and strong rejection outside the band  
- The return loss (\( S_{11} \)) is better in the layout simulation at the center frequency, indicating good impedance matching  

**Comparison Table of Required Specifications and Simulation Results:**

| Parameter | Specification | Schematic Simulation | Layout Simulation |
|-----------|---------------|--------------------|-----------------|
| Passband Frequency (GHz) | 2.8 – 3.2 | 2.8 – 3.2 | 2.8 – 3.2 |
| \( S_{21} \) at 2.8 GHz (dB) | ≥ -2 | -1.126 | -0.263 |
| \( S_{21} \) at 3.2 GHz (dB) | ≥ -2 | -1.229 | -1.457 |
| \( S_{11} \) in Passband (dB) | ≤ -20 | -20.196 | -23.416 |
| \( S_{21} \) at 2.3 GHz (dB) | ≤ -40 | -41.618 | -45.391 |
| \( S_{21} \) at 3.7 GHz (dB) | ≤ -40 | -40.084 | -52.325 |


## Conclusion

The final design meets all specifications in both schematic and layout simulations. This demonstrates the effectiveness of the **ADS design flow with optimization and EM simulation** for RF filter design.

---

