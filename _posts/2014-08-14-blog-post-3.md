---
title: "Parallel Coupled Line Bandpass Filter Design using ADS"
date: 2025-09-06
permalink: /posts/2025/09/bandpass-filter/
tags:
  - RFIC
  - Microwave Engineering
  - ADS
---

# Parallel Coupled Line Bandpass Filter Using ADS

**Course:** RFIC Design - Homework 3  
**Name:** Abdelrahman Abdelsalam Mohammed Osman  
**Student ID:** 202424020103  
**University:** University of Electronic Science and Technology of China  
**School:** School of Electronic Science and Engineering (ESE)  
**Instructor:** Prof. Yong Zhang  
**Date:** March 26, 2025

---

## Table of Contents
1. [Design Specifications](#design-specifications)
2. [Coupled Line Filter Design](#coupled-line-filter-design)
3. [Simulation and Initial Results](#simulation-and-initial-results)
4. [Optimization in ADS](#optimization-in-ads)
5. [Schematic Simulation Results](#schematic-simulation-results)
6. [Layout Simulation (Momentum)](#layout-simulation-momentum)
7. [Comparison of Schematic and Layout Simulation Results](#comparison-of-schematic-and-layout-simulation-results)
8. [Conclusion](#conclusion)

---

## Design Specifications

The objective is to design a microstrip hairpin bandpass filter with the following specifications:

- **Passband:** 2.8 GHz - 3.2 GHz  
- **Insertion Loss (S21):** $>-2$ dB  
- **Return Loss (S11):** $<-20$ dB  
- **Out-of-Band Rejection:** $>40$ dB at $<$ 2.3 GHz and $>$ 3.7 GHz  

The substrate used is Taconic RF60:

- Relative permittivity ($\varepsilon_r$) = 6.15  
- Substrate thickness = 0.635 mm  
- Copper thickness = 0.017 mm  

---

## Coupled Line Filter Design

The filter structure is based on a **5-section microstrip coupled-line filter** with two additional transmission lines for input and output matching.  

### Initial Design Parameters

Each section consists of a coupled-line pair, where the main design variables are:

- **Line Widths ($W$):** $W_1, W_2, W_3$  
- **Line Lengths ($L$):** $L_1, L_2, L_3$  
- **Coupling Gaps ($S$):** $S_1, S_2, S_3$  

Initial values:

- $L's = 11.92$ mm  
- $W's = 1$ mm  
- $S's = 1$ mm  

### Microstrip Calculations

The dimensions of the input and output microstrip transmission lines were determined using the **LineCalc tool** in ADS:

- **Length ($L_{\text{in/out}}$):** 11.92 mm  
- **Width ($W_{\text{in/out}}$):** 0.91 mm  

#### Substrate Parameters

![Substrate Parameters]({{ site.baseurl }}/images/sub_par.png)

#### LineCalc Tool Output

![LineCalc tool output]({{ site.baseurl }}/images/lin_cal.png)

### Schematic Design in ADS

The circuit is designed in **Advanced Design System (ADS)** with:

- 5 coupled-line filter sections  
- Two microstrip transmission lines for input and output matching  
- Initial dimensions set based on theoretical calculations  

![Schematic of the Hairpin Bandpass Filter]({{ site.baseurl }}/images/schem.png)

![S-parameters Simulation Setup]({{ site.baseurl }}/images/s_par_sim.png)

---

## Simulation and Initial Results

The initial simulation results in ADS show:

- **Passband center frequency:** ~3 GHz  
- **S21 (Insertion Loss):** ~-2.5 dB  
- **S11 (Return Loss):** ~-15 dB  
- **Out-of-band rejection:** ~35 dB at $<$ 2.3 GHz and $>$ 3.7 GHz  

![Initial S-parameter simulation results before optimization]({{ site.baseurl }}/images/s_par_before_optim.png)

---

## Optimization in ADS

Optimization variables in ADS:

- Line Lengths ($L$): 10 mm - 15 mm  
- Line Widths ($W$): 0.2 mm - 3 mm  
- Coupling Gaps ($S$): 0.2 mm - 3 mm  

![Optimization goal setup in ADS]({{ site.baseurl }}/images/goal.png)

![Design goals for the parallel coupled line filter]({{ site.baseurl }}/images/des_goals.png)

### Optimization Process

- Minimize insertion loss ($S_{21} > -2$ dB)  
- Maximize return loss ($S_{11} < -20$ dB)  
- Improve out-of-band rejection ($> 40$ dB at unwanted frequencies)  

![Optimization goal window in ADS]({{ site.baseurl }}/images/optim_goal_win.png)

![Optimization process window in ADS]({{ site.baseurl }}/images/optim_wind.png)

Final optimized dimensions:

- **Optimized $S$ values:** $s_1 = 0.363067$, $s_2 = 0.547091$, $s_3 = 0.207747$  
- **Optimized $W$ values:** $w_1 = 0.201454$, $w_2 = 0.634206$, $w_3 = 2.50838$  
- **Optimized $L$ values:** $l_1 = 13.547$, $l_2 = 10.6291$, $l_3 = 13.9269$  

![S-parameter results after optimization]({{ site.baseurl }}/images/after_optim.png)

---

## Schematic Simulation Results

After optimization, the final design meets all specifications:

- **Passband:** 2.8 - 3.2 GHz  
- **S21:** $>-2$ dB  
- **S11:** $<-20$ dB  
- **Out-of-band rejections:** $>40$ dB at $<$ 2.3 GHz and $>$ 3.7 GHz  

![Wideband frequency response after optimization]({{ site.baseurl }}/images/wide_band.png)

![Final S-parameter results after optimization]({{ site.baseurl }}/images/final_result.png)

---

## Layout Simulation (Momentum)

### Generating the Layout

![Schematic setup for layout generation]({{ site.baseurl }}/images/schematic_for_gen_layout.png)

### Layout Generation Window

![Layout generation window in ADS Momentum]({{ site.baseurl }}/images/layout_gen_wind.png)

### Final Layout

![Final layout of the microstrip filter]({{ site.baseurl }}/images/layout.png)

---

## Comparison of Schematic and Layout Simulation Results

![Schematic and layout simulation results]({{ site.baseurl }}/images/layout_schem_sim_res.png)

**Observations:**

- **Schematic Simulation Results:**

\[
\begin{aligned}
& f = 2.800 \, \text{GHz}, \ S_{21} = -1.495 \, \text{dB} \\
& f = 3.200 \, \text{GHz}, \ S_{21} = -1.545 \, \text{dB} \\
& f = 2.300 \, \text{GHz}, \ S_{21} = -52.272 \, \text{dB} \\
& f = 3.700 \, \text{GHz}, \ S_{21} = -40.316 \, \text{dB} \\
& S_{11} @ f=3.000 \, \text{GHz} = -20.196 \, \text{dB} 
\end{aligned}
\]

- **Layout Simulation Results:**

\[
\begin{aligned}
& f = 2.800 \, \text{GHz}, \ S_{21} = -0.263 \, \text{dB} \\
& f = 3.200 \, \text{GHz}, \ S_{21} = -1.457 \, \text{dB} \\
& f = 2.302 \, \text{GHz}, \ S_{21} = -45.391 \, \text{dB} \\
& f = 3.708 \, \text{GHz}, \ S_{21} = -52.325 \, \text{dB} \\
& S_{11} @ f=2.970 \, \text{GHz} = -23.416 \, \text{dB} 
\end{aligned}
\]

### Comparison Table

| Parameter | Specification | Schematic Simulation | Layout Simulation |
|-----------|---------------|--------------------|-----------------|
| Passband Frequency (GHz) | 2.8 -- 3.2 | 2.8 -- 3.2 | 2.8 -- 3.2 |
| $S_{21}$ at 2.8 GHz (dB) | $\geq -2$ | -1.126 | -0.263 |
| $S_{21}$ at 3.2 GHz (dB) | $\geq -2$ | -1.229 | -1.457 |
| $S_{11}$ in Passband (dB) | $\leq -20$ | -20.196 | -23.416 |
| $S_{21}$ at 2.3 GHz (dB) | $\leq -40$ | -41.618 | -45.391 |
| $S_{21}$ at 3.7 GHz (dB) | $\leq -40$ | -40.084 | -52.325 |

---

## Conclusion

The final simulation results confirm that the designed parallel coupled line band-pass filter meets the required specifications in both schematic and layout simulations. The layout results exhibit slight degradation due to parasitic effects, but the performance remains within acceptable limits.
