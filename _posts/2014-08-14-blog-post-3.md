---
title: "Parallel Coupled Line Bandpass Filter Design using ADS"
date: 2025-09-06
permalink: /posts/2025/09/bandpass-filter/
tags:
  - RFIC
  - Microwave Engineering
  - ADS
---

## Design Objective

The goal is to design a **parallel coupled-line bandpass filter** with the following specifications:

- **Passband:** 2.8 GHz – 3.2 GHz  
- **Insertion Loss (S21):** \( > -2 \, \text{dB} \)  
- **Return Loss (S11):** \( < -20 \, \text{dB} \)  
- **Out-of-Band Rejection:** \( > 40 \, \text{dB at } f < 2.3 \, \text{GHz and } f > 3.7 \, \text{GHz} \)  

The substrate used is **Taconic RF60**:
- Relative permittivity \( \varepsilon_r = 6.15 \)
- Thickness = 0.635 mm
- Copper thickness = 0.017 mm

---

## Filter Design and Theory

The filter is based on a **5-section coupled-line design**. The characteristic impedance of the microstrip line can be approximated by:

\[
Z_0 = \frac{60}{\sqrt{\varepsilon_{\text{eff}}}} \ln\left( \frac{8h}{W} + 0.25\frac{W}{h} \right)
\]

where:
- \( h \) = substrate height
- \( W \) = microstrip width
- \( \varepsilon_{\text{eff}} \) = effective dielectric constant

The guided wavelength at center frequency \( f_0 \) is:

\[
\lambda_g = \frac{c}{f_0 \sqrt{\varepsilon_{\text{eff}}}}
\]

---

## Schematic Design

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/schem.png" alt="Filter Schematic" width="700"/>

The initial dimensions:
- \( L = 11.92 \, \text{mm} \)
- \( W = 1 \, \text{mm} \)
- \( S = 1 \, \text{mm} \)

**Calculated Microstrip Dimensions:**

- Length \( L_{\text{in/out}} = 11.92 \, \text{mm} \)
- Width \( W_{\text{in/out}} = 0.91 \, \text{mm} \)

---

### Substrate Parameters

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/sub_par.png" alt="Substrate Parameters" width="500"/>

---

### LineCalc Output

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/lin_cal.png" alt="LineCalc Output" width="500"/>

---

## Initial Simulation

The initial ADS simulation results show:
- Passband around **3 GHz**
- Insertion Loss \( S_{21} \approx -2.5 \, \text{dB} \)
- Return Loss \( S_{11} \approx -15 \, \text{dB} \)

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/s_par_before_optim.png" alt="Initial S-parameters" width="700"/>

---

## Optimization

We used ADS Optimizer with goals:
\[
\begin{aligned}
& \text{Maximize } S_{21} > -2 \, \text{dB} \\
& \text{Ensure } S_{11} < -20 \, \text{dB} \\
& \text{Improve rejection } > 40 \, \text{dB at out-of-band frequencies}
\end{aligned}
\]

**Optimization Window:**

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/optim_wind.png" alt="Optimization Window" width="700"/>

---

### After Optimization

Optimized dimensions:
- \( S_1 = 0.363 \, \text{mm}, S_2 = 0.547 \, \text{mm}, S_3 = 0.208 \, \text{mm} \)
- \( W_1 = 0.201 \, \text{mm}, W_2 = 0.634 \, \text{mm}, W_3 = 2.508 \, \text{mm} \)
- \( L_1 = 13.547 \, \text{mm}, L_2 = 10.629 \, \text{mm}, L_3 = 13.927 \, \text{mm} \)

**S-Parameter After Optimization:**

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/after_optim.png" alt="S-parameters After Optimization" width="700"/>

---

## Final Results

- Passband: **2.8 – 3.2 GHz**
- \( S_{21} > -2 \, \text{dB} \)
- \( S_{11} < -20 \, \text{dB} \)
- Out-of-band rejection \( > 40 \, \text{dB} \)

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/final_result.png" alt="Final S-parameters" width="700"/>

---

## Layout Simulation (Momentum)

Layout was generated and simulated in ADS Momentum:

<img src="https://abdelrahman-dip.github.io/abdelrahmanosman.github.io/images/layout.png" alt="Final Layout" width="600"/>

**Comparison Table:**

| Parameter | Spec | Schematic | Layout |
|-----------|------|-----------|--------|
| \( S_{21} \) @ 2.8 GHz | ≥ -2 dB | -1.126 dB | -0.263 dB |
| \( S_{11} \) | ≤ -20 dB | -20.196 dB | -23.416 dB |

---

## Conclusion

The final design meets all specifications in both schematic and layout simulations. This demonstrates the effectiveness of the **ADS design flow with optimization and EM simulation** for RF filter design.

---

